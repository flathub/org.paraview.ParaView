app-id: org.paraview.ParaView
runtime: org.kde.Sdk
sdk: org.kde.Sdk
runtime-version: 5.15-23.08
base: io.qt.qtwebengine.BaseApp
base-version: 5.15-23.08
rename-icon: paraview
command: paraview
finish-args:
  - --share=ipc
  - --socket=x11
  - --device=dri
  - --share=network
  - --filesystem=home
cleanup:
  - /include
  - /lib/cmake
  - /lib/pkgconfig
  - /share/doc
  - /share/man
  - /etc
  - '*.la'
  - '*.a'

# Disable ARM support, ParaView does not support it anyway.
modules:
  - shared-modules/glew/glew.json

  - name: meson
    buildsystem: simple
    build-commands:
      - python3 setup.py build
      - python3 setup.py install --prefix=/app --root=/
    sources:
      - type: git
        url: https://github.com/mesonbuild/meson.git
        tag: 1.4.0
        commit: eaefe29463a61a311a6b1de6cd539f39500399ff
        x-checker-data:
          type: git
          tag-pattern: ^([\d.]+)$

  - name: OpenBLAS # dependency for numpy
    no-autogen: true
    make-args:
      - DYNAMIC_ARCH=1
      - DYNAMIC_OLDER=1
      - FC=gfortran
      - TARGET=GENERIC
      - USE_OPENMP=0
    make-install-args:
      - PREFIX=/app
    sources:
      - type: archive
        url: https://github.com/xianyi/OpenBLAS/archive/v0.3.27.tar.gz
        sha256: aa2d68b1564fe2b13bc292672608e9cdeeeb6dc34995512e65c3b10f4599e897
        x-checker-data:
          type: anitya
          project-id: 2540
          url-template: https://github.com/xianyi/OpenBLAS/archive/v$version.tar.gz

    # python3 flatpak-pip-generator setuptools_scm_git_archive tomli typing-extensions pyproject_metadata setuptools_scm meson-python numpy certifi pyparsing pillow packaging cppy kiwisolver fonttools cycler pybind11 contourpy python-dateutil pkgconfig pyparsing -o python-deps && fb
  - python-deps.json

  # - name: freetype
  #   buildsystem: cmake
  #   builddir: true
  #   sources:
  #     - type: archive
  #       url: https://downloads.sourceforge.net/project/freetype/freetype2/2.6.1/freetype-2.6.1.tar.gz
  #       sha256: 0a3c7dfbda6da1e8fce29232e8e96d987ababbbf71ebc8c75659e4132c367014

  - name: python3-matplotlib
    buildsystem: simple
    build-commands:
      - python3 -mpip install . --no-index --find-links=file://${PWD} --prefix=${FLATPAK_DEST}
        --no-build-isolation
    sources:
      - type: archive
        dest: build/freetype-2.6.1
        url: https://downloads.sourceforge.net/project/freetype/freetype2/2.6.1/freetype-2.6.1.tar.gz
        sha256: 0a3c7dfbda6da1e8fce29232e8e96d987ababbbf71ebc8c75659e4132c367014
      - type: archive
        dest: build/qhull-2020.2
        url: http://www.qhull.org/download/qhull-2020-src-8.0.2.tgz
        sha256: b5c2d7eb833278881b952c8a52d20179eab87766b00b865000469a45c1838b7e
      - type: archive
        url: https://files.pythonhosted.org/packages/38/4f/8487737a74d8be4ab5fbe6019b0fae305c1604cf7209500969b879b5f462/matplotlib-3.8.4.tar.gz
        sha256: 8aac397d5e9ec158960e31c381c5ffc52ddd52bd9a47717e2a694038167dffea
        x-checker-data:
          type: pypi
          name: matplotlib

  - name: Boost
    buildsystem: simple
    build-commands:
      - ./bootstrap.sh --prefix=/app
      - ./b2 install cxxflags="$CXXFLAGS" linkflags="$LDFLAGS" -j $FLATPAK_BUILDER_N_JOBS
    sources:
      - type: archive
        url: https://boostorg.jfrog.io/artifactory/main/release/1.85.0/source/boost_1_85_0.tar.bz2
        sha256: 7009fe1faa1697476bdc7027703a2badb84e849b7b0baad5086b087b971f8617
        x-checker-data:
          type: anitya
          project-id: 6845
          stable-only: true
          url-template: https://boostorg.jfrog.io/artifactory/main/release/${version}/source/boost_${major}_${minor}_${patch}.tar.bz2

  - name: hdf5
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DBUILD_TESTING:BOOL=OFF
      - -DHDF5_BUILD_EXAMPLES:BOOL=OFF
      - -DHDF5_ENABLE_Z_LIB_SUPPORT:BOOL=ON
    sources:
      - type: archive
        url: https://github.com/HDFGroup/hdf5/archive/refs/tags/hdf5-1_14_3.tar.gz
        sha256: df5ee33c74d5efb59738075ef96f4201588e1f1eeb233f047ac7fd1072dee1f6
        x-checker-data:
          type: anitya
          project-id: 1303
          stable-only: true
          url-template: https://github.com/HDFGroup/hdf5/archive/refs/tags/hdf5-${version}.tar.gz

  - name: python-h5py
    buildsystem: simple
    build-commands:
      - python3 -mpip install . --no-index --find-links=file://${PWD} --prefix=${FLATPAK_DEST}
        --no-build-isolation
    sources:
      - type: archive
        url: https://github.com/h5py/h5py/archive/refs/tags/3.11.0.tar.gz
        sha256: 034ec21f28f2f2edc4542515a9ae45356a25bb459048acf9622e6b1143b3fae7
        x-checker-data:
          type: anitya
          project-id: 6409
          stable-only: true
          url-template: https://github.com/h5py/h5py/archive/refs/tags/${version}.tar.gz

  - name: netcdf
    sources:
      - type: archive
        url: https://github.com/Unidata/netcdf-c/archive/v4.9.2.tar.gz
        sha256: bc104d101278c68b303359b3dc4192f81592ae8640f1aee486921138f7f88cb7
        x-checker-data:
          type: anitya
          project-id: 10354
          stable-only: true
          url-template: https://github.com/Unidata/netcdf-c/archive/v${version}.tar.gz

  - name: openmpi
    sources:
      - type: archive
        url: https://download.open-mpi.org/release/open-mpi/v5.0/openmpi-5.0.3.tar.bz2
        sha256: 990582f206b3ab32e938aa31bbf07c639368e4405dca196fabe7f0f76eeda90b
        x-checker-data:
          type: anitya
          project-id: 2554
          stable-only: true
          url-template: https://download.open-mpi.org/release/open-mpi/v${major}.${minor}/openmpi-${version}.tar.bz2

  - name: TBB
    buildsystem: cmake-ninja
    config-opts:
      - -DTBB_TEST=OFF
      - -DTBB_EXAMPLES=OFF
      - -DTBB_STRICT=OFF
    builddir: true
    sources:
      - type: archive
        url: https://github.com/oneapi-src/oneTBB/archive/refs/tags/v2021.12.0.tar.gz
        sha256: c7bb7aa69c254d91b8f0041a71c5bcc3936acb64408a1719aec0b2b7639dd84f
        x-checker-data:
          type: anitya
          project-id: 8217
          stable-only: true
          url-template: https://github.com/oneapi-src/oneTBB/archive/refs/tags/v$version.tar.gz

  - name: Embree
    buildsystem: cmake-ninja
    config-opts:
      - -DEMBREE_TUTORIALS:BOOL=OFF
      - -DEMBREE_ISPC_SUPPORT:BOOL=ON
    sources:
      - type: archive
        url: https://github.com/embree/embree/archive/refs/tags/v3.13.1.tar.gz
        sha256: 00dbd852f19ae2b95f5106dd055ca4b304486436ced0ccf842aec4e38a4df425
    modules:
      - name: extra-cmake-modules
        buildsystem: cmake-ninja
        sources:
          - type: git
            url: https://invent.kde.org/frameworks/extra-cmake-modules.git
            tag: v5.100.0
        # Attempt to build from source, but ISPC need glic-32bit which make things complicated.
        # OSPRay need ISPC 1.9.2.
      - name: ISPC
        buildsystem: simple
        build-commands:
          - cp bin/ispc /app/bin/
        sources:
          - type: archive
            url: https://github.com/ispc/ispc/releases/download/v1.16.0/ispc-v1.16.0-linux.tar.gz
            sha256: 71a20e75ee1b952d8096a842368244111a0a727454d4a42043de10eadf02e740
      - name: glfw
        buildsystem: cmake-ninja
        config-opts:
          - -DGLFW_USE_WAYLAND:BOOL=ON
          - -DBUILD_SHARED_LIBS:BOOL=ON
          - -DGLFW_BUILD_EXAMPLES:BOOL=OFF
          - -DGLFW_BUILD_TESTS:BOOL=OFF
          - -DGLFW_BUILD_DOCS:BOOL=OFF
        sources:
          - type: archive
            url: https://github.com/glfw/glfw/releases/download/3.3.4/glfw-3.3.4.zip
            sha256: bbd2c42c660b725e9755eb417e40b373f0d4c03138c9b2e210d02cd308bd99cd

  - name: OSPRay
    buildsystem: cmake
    builddir: true
    config-opts:
      - -DOSPRAY_ENABLE_APPS_BENCHMARK:BOOL=OFF
      - -DOSPRAY_ENABLE_APPS_EXAMPLES:BOOL=OFF
      - -DOSPRAY_ENABLE_APPS_TUTORIALS:BOOL=OFF
      - -DOSPRAY_ENABLE_APPS_TESTING:BOOL=OFF
    sources:
      - type: archive
        url: https://github.com/ospray/ospray/archive/refs/tags/v2.9.0.tar.gz
        sha256: 0145e09c3618fb8152a32d5f5cff819eb065d90975ee4e35400d2db9eb9f6398
    modules:
      - name: rkcommon
        buildsystem: cmake
        builddir: true
        config-opts:
          - -DBUILD_TESTING:BOOL=OFF
        sources:
          - type: archive
            url: https://github.com/ospray/rkcommon/archive/refs/tags/v1.9.0.tar.gz
            sha256: b68aa02ef44c9e35c168f826a14802bb5cc6a9d769ba4b64b2c54f347a14aa53
      - name: openvkl
        buildsystem: cmake
        builddir: true
        config-opts:
          - -DBUILD_EXAMPLES:BOOL=OFF
          - -DBUILD_BENCHMARKS:BOOL=OFF
          - -DBUILD_TESTING:BOOL=OFF
        sources:
          - type: archive
            url: https://github.com/openvkl/openvkl/archive/refs/tags/v1.2.0.tar.gz
            sha256: dc468c2f0a359aaa946e04a01c2a6634081f7b6ce31b3c212c74bf7b4b0c9ec2

  - name: GDAL
    buildsystem: cmake-ninja
    config-opts:
      - -DACCEPT_MISSING_SQLITE3_RTREE:BOOL=ON
      - -DBUILD_TESTING:BOOL=OFF
    sources:
      - type: archive
        url: https://github.com/OSGeo/gdal/archive/refs/tags/v3.9.0.tar.gz
        sha256: 205bfbcd69bd75147a24653f66d22ce6712fa8ea8de365c156bd30fdcfff138c
        x-checker-data:
          type: anitya
          project-id: 881
          stable-only: true
          url-template: https://github.com/OSGeo/gdal/archive/refs/tags/v$version.tar.gz
    modules:
      - name: PROJ
        buildsystem: cmake-ninja
        config-opts:
          - -DBUILD_TESTING:BOOL=OFF
        sources:
          - type: archive
            url: https://github.com/OSGeo/PROJ/releases/download/9.4.0/proj-9.4.0.tar.gz
            sha256: 3643b19b1622fe6b2e3113bdb623969f5117984b39f173b4e3fb19a8833bd216
            x-checker-data:
              type: anitya
              project-id: 9463
              stable-only: true
              url-template: https://github.com/OSGeo/PROJ/releases/download/$version/proj-$version.tar.gz

  - name: GeoTIFF
    builddir: true
    sources:
      - type: archive
        url: https://download.osgeo.org/geotiff/libgeotiff/libgeotiff-1.7.1.tar.gz
        sha256: 05ab1347aaa471fc97347d8d4269ff0c00f30fa666d956baba37948ec87e55d6
        x-checker-data:
          type: anitya
          project-id: 21361
          stable-only: true
          url-template: https://download.osgeo.org/geotiff/libgeotiff/libgeotiff-$version.tar.gz

  - name: LASzip
    buildsystem: cmake-ninja
    builddir: true
    sources:
      - type: archive
        url: https://github.com/LASzip/LASzip/releases/download/3.4.3/laszip-src-3.4.3.tar.gz
        sha256: 53f546a7f06fc969b38d1d71cceb1862b4fc2c4a0965191a0eee81a57c7b373d
        x-checker-data:
          type: anitya
          project-id: 241499
          stable-only: true
          url-template: https://github.com/LASzip/LASzip/releases/download/$version/laszip-src-$version.tar.gz

  - name: lapack
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
      - -DBUILD_SHARED_LIBS=ON
      - -DBUILD_TESTING=OFF
      - -DLAPACKE=ON
      - -DCBLAS=ON
    sources:
      - type: archive
        url: https://github.com/Reference-LAPACK/lapack/archive/refs/tags/v3.12.0.tar.gz
        sha256: eac9570f8e0ad6f30ce4b963f4f033f0f643e7c3912fc9ee6cd99120675ad48b
        x-checker-data:
          type: anitya
          project-id: 1534
          stable-only: true
          url-template: https://github.com/Reference-LAPACK/lapack/archive/refs/tags/v$version.tar.gz

  - name: Eigen3
    buildsystem: cmake-ninja
    builddir: true
    sources:
      - type: archive
        url: https://gitlab.com/libeigen/eigen/-/archive/3.4.0/eigen-3.4.0.tar.bz2
        sha256: b4c198460eba6f28d34894e3a5710998818515104d6e74e5cc331ce31e46e626
        x-checker-data:
          type: anitya
          project-id: 13751
          stable-only: true
          url-template: https://gitlab.com/libeigen/eigen/-/archive/${version}/eigen-${version}.tar.bz2
    cleanup:
      - '*'

  - name: SWIG
    sources:
      - type: archive
        url: https://sourceforge.net/projects/swig/files/swig/swig-4.1.1/swig-4.1.1.tar.gz
        sha256: 2af08aced8fcd65cdb5cc62426768914bedc735b1c250325203716f78e39ac9b

  - name: OpenTURNS
    buildsystem: cmake-ninja
    sources:
      - type: archive
        url: https://github.com/openturns/openturns/archive/refs/tags/v1.22.tar.gz
        sha256: 487f7fc00f02eb91d264c8c9d78c2abba505ac6aaa5bc0328c04dddbe6d58741
        x-checker-data:
          type: anitya
          project-id: 220847
          stable-only: true
          url-template: https://github.com/openturns/openturns/archive/refs/tags/v${version}.tar.gz
    cleanup:
      - /share

    # Provide libnuma for MEMKIND
  - name: numactl
    sources:
      - type: archive
        url: https://github.com/numactl/numactl/releases/download/v2.0.18/numactl-2.0.18.tar.gz
        sha256: b4fc0956317680579992d7815bc43d0538960dc73aa1dd8ca7e3806e30bc1274
        x-checker-data:
          type: anitya
          project-id: 2507
          stable-only: true
          url-template: https://github.com/numactl/numactl/releases/download/v${version}/numactl-${version}.tar.gz

  - name: MEMKIND
    sources:
      - type: archive
        url: https://github.com/memkind/memkind/archive/refs/tags/v1.14.0.tar.gz
        sha256: ab366b20b5a87ea655483631fc762ba6eb59eb6c3a08652e643f1ee3f06a6a12
        x-checker-data:
          type: anitya
          project-id: 220852
          stable-only: true
          url-template: https://github.com/memkind/memkind/archive/refs/tags/v${version}.tar.gz
      - type: patch
        path: memkind_support_multi-threading_build.patch

  - name: ADIOS2
    buildsystem: cmake
    builddir: true
    config-opts:
      - -DADIOS2_RUN_INSTALL_TEST:BOOL=OFF
      - -DADIOS2_BUILD_EXAMPLES=OFF
      - -DBUILD_SHARED_LIBS=ON
      - -DADIOS2_USE_HDF5:STRING=OFF
      - -DBUILD_TESTING:BOOL=OFF
      - -DINSTALL_GTEST:BOOL=OFF
    sources:
      - type: archive
        url: https://github.com/ornladios/ADIOS2/archive/refs/tags/v2.10.0.tar.gz
        sha256: e5984de488bda546553dd2f46f047e539333891e63b9fe73944782ba6c2d95e4
        x-checker-data:
          type: anitya
          project-id: 220828
          stable-only: true
          url-template: https://github.com/ornladios/ADIOS2/archive/refs/tags/v${version}.tar.gz

  - name: Catalyst
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DCMAKE_CXX_STANDARD:STRING=14 #Fix error: ‘std::uint64_t’ has not been declared
      - -DCATALYST_BUILD_TESTING:BOOL=OFF
      - -DCATALYST_USE_MPI:BOOL=ON
      - -DCATALYST_WRAP_PYTHON:BOOL=ON
    sources:
      - type: git
        url: https://gitlab.kitware.com/paraview/catalyst
        commit: 777fe7fb5e7e86bacb96908ab33f49eeb2d01cf9

  - name: gmsh
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DCMAKE_CXX_STANDARD:STRING=14
      - -DCMAKE_BUILD_TYPE:STRING=Release
      - -DENABLE_BUILD_LIB=ON
      - -DENABLE_BUILD_SHARED=ON
      - -DENABLE_BUILD_DYNAMIC=ON
      - -DENABLE_BLAS_LAPACK=ON
      - -DENABLE_POST=1
      - -DENABLE_PARSER=1
      - -DENABLE_MPI:BOOL=ON
      - -DENABLE_PRIVATE_API:BOOL=ON
    sources:
      - type: archive
        url: https://gmsh.info/src/gmsh-4.8.4-source.tgz
        sha256: 760dbdc072eaa3c82d066c5ba3b06eacdd3304eb2a97373fe4ada9509f0b6ace
        # support gmsh 4.11.1
        # x-checker-data:
        #   type: anitya
        #   project-id: 9575
        #   stable-only: true
        #   url-template: https://gmsh.info/src/gmsh-$version-source.tgz

  # - name: blosc
  #   buildsystem: cmake-ninja
  #   builddir: true
  #   sources:
  #     - type: git
  #       url: https://github.com/Blosc/c-blosc.git
  #       tag: v1.21.4
  #       x-checker-data:
  #         type: git
  #         tag-pattern: ^(v[\d.]+)$
  #
  # - name: openvdb
  #   buildsystem: cmake-ninja
  #   builddir: true
  #   config-opts:
  #     - -DOPENVDB_CORE_STATIC:BOOL=OFF
  #   sources:
  #     - type: git
  #       url: https://github.com/AcademySoftwareFoundation/openvdb.git
  #       tag: v10.0.1
  #       x-checker-data:
  #         type: git
  #         tag-pattern: ^(v[\d.]+)$

  - name: PDAL
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DWITH_TESTS=OFF
      - -DCMAKE_CXX_STANDARD:STRING=14
      - -DWITH_TESTS:BOOL=OFF
      - -DWITH_LZMA:BOOL=OFF
      - -DWITH_ZLIB:BOOL=ON
      - -DWITH_ZSTD:BOOL=ON
      - -DBUILD_PLUGIN_HDF:BOOL=OFF
      - -DBUILD_PLUGIN_E57:BOOL=OFF
    sources:
      - type: archive
        url: https://github.com/PDAL/PDAL/releases/download/2.5.6/PDAL-2.5.6-src.tar.bz2
        sha256: 7c7c4570ef518942299479cc4077e0c657ec5b5174daf465415de947a1d3eb99
        # New update need c++14 https://gitlab.kitware.com/vtk/vtk/-/issues/19189
        # Until paraview use c++11 we stay on this version
        # x-checker-data:
        #   type: anitya
        #   project-id: 138228
        #   stable-only: true
        #   url-template: https://github.com/PDAL/PDAL/releases/download/$version/PDAL-$version-src.tar.bz2

  - name: Imath
    buildsystem: cmake-ninja
    config-opts:
      - -DBUILD_TESTING:BOOL=OFF
    sources:
      - type: git
        url: https://github.com/AcademySoftwareFoundation/Imath.git
        tag: v3.1.11
        commit: 5ac1d5335cb34f0f356c5f2461a57c845b96b115
        x-checker-data:
          type: git
          tag-pattern: ^(v[\d.]+)$

  - name: Alembic
    buildsystem: cmake-ninja
    config-opts:
      - -DUSE_TESTS:BOOL=OFF
      - -DUSE_HDF5:BOOL=ON
    sources:
      - type: archive
        url: https://github.com/alembic/alembic/archive/refs/tags/1.8.6.tar.gz
        sha256: c572ebdea3a5f0ce13774dd1fceb5b5815265cd1b29d142cf8c144b03c131c8c
        x-checker-data:
          type: anitya
          project-id: 13980
          stable-only: true
          url-template: https://github.com/alembic/alembic/archive/refs/tags/$version.tar.gz

    # Use 7.7.2 https://discourse.paraview.org/t/how-to-build-paraview-with-occt-required-targets-tkstep-tkiges-tkxdestep-tkxdeiges/14677/3
  - name: OCCT
    buildsystem: cmake-ninja
    config-opts:
      - -DBUILD_MODULE_Draw:BOOL=FALSE
      - -DBUILD_MODULE_Visualization:BOOL=FALSE
      - -DBUILD_MODULE_DataExchange:BOOL=TRUE
      - -DBUILD_DOC_Overview:BOOL=FALSE
      - -DBUILD_SAMPLES_QT:BOOL=OFF
      - -DINSTALL_SAMPLES:BOOL=OFF
      - -DINSTALL_TCL:BOOL=OFF
      - -DINSTALL_TEST_CASES:BOOL=OFF
      - -DINSTALL_TK:BOOL=OFF
    sources:
      - type: git
        url: https://github.com/Open-Cascade-SAS/OCCT.git
        tag: V7_7_2
        # commit: 3b5f0ca3722968991549cfce1caca4fa89bf97b1
        x-checker-data:
          type: git
          tag-pattern: ^(V[\d._]+)$

    # Paraview need 32GB of memory to build
  - name: Paraview
    buildsystem: cmake-ninja
    builddir: true
    build-options:
      cflags: -I/app/include/eigen3
      cxxflags: -I/app/include/eigen3
    config-opts:
      - -DCMAKE_CXX_STANDARD:STRING=14
      - -DCMAKE_BUILD_TYPE:STRING=Release
      - -DPARAVIEW_BUILD_DEVELOPER_DOCUMENTATION:BOOL=OFF
      - -DPARAVIEW_BUILD_LEGACY_REMOVE:BOOL=OFF
      - -DPARAVIEW_BUILD_LEGACY_SILENT:BOOL=OFF
      - -DPARAVIEW_BUILD_SHARED_LIBS:BOOL=ON
      - -DPARAVIEW_BUILD_TESTING:STRING=OFF
      - -DPARAVIEW_BUILD_WITH_EXTERNAL:BOOL=OFF
      - -DPARAVIEW_BUILD_WITH_KITS:BOOL=OFF
      - -DPARAVIEW_ENABLE_ADIOS2:BOOL=ON
      - -DPARAVIEW_ENABLE_ALEMBIC:BOOL=ON
      - -DPARAVIEW_ENABLE_CATALYST:BOOL=ON
      - -DPARAVIEW_ENABLE_EXAMPLES:BOOL=ON
      - -DPARAVIEW_ENABLE_FFMPEG:BOOL=ON
      - -DPARAVIEW_ENABLE_FIDES:BOOL=ON
      - -DPARAVIEW_ENABLE_GDAL:BOOL=ON
      - -DPARAVIEW_ENABLE_GEOVIS:BOOL=ON
      - -DPARAVIEW_ENABLE_LAS:BOOL=OFF
      - -DPARAVIEW_ENABLE_LOOKINGGLASS:BOOL=OFF # Propiertary
      - -DPARAVIEW_ENABLE_MOMENTINVARIANTS:BOOL=OFF #Failed to build
      - -DPARAVIEW_ENABLE_MOTIONFX:BOOL=ON
      - -DPARAVIEW_ENABLE_NVPIPE:BOOL=OFF
      - -DPARAVIEW_ENABLE_OCCT:BOOL=ON
      - -DPARAVIEW_ENABLE_OPENTURNS:BOOL=ON
      - -DPARAVIEW_ENABLE_OPENVDB:BOOL=OFF #https://github.com/AcademySoftwareFoundation/openvdb/issues/1160
      - -DPARAVIEW_ENABLE_PDAL:BOOL=ON
      - -DPARAVIEW_ENABLE_RAYTRACING:BOOL=ON
      - -DPARAVIEW_ENABLE_VISITBRIDGE:BOOL=ON
      - -DPARAVIEW_ENABLE_XDMF2:BOOL=ON
      - -DPARAVIEW_ENABLE_XDMF3:BOOL=ON
      - -DPARAVIEW_GENERATE_SPDX:BOOL=OFF
      - -DPARAVIEW_INSTALL_DEVELOPMENT_FILES:BOOL=ON
      - -DPARAVIEW_LOGGING_TIME_PRECISION:STRING=3
      - -DPARAVIEW_PLUGINS_DEFAULT:BOOL=ON
      - -DPARAVIEW_PLUGIN_DISABLE_XML_DOCUMENTATION:BOOL=OFF
      - -DPARAVIEW_PLUGIN_ENABLE_AcceleratedAlgorithms:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_AnalyzeNIfTIReaderWriter:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_ArrowGlyph:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_BagPlotViewsAndFilters:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_CAVEInteraction:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_CDIReader:BOOL=OFF
      - -DPARAVIEW_PLUGIN_ENABLE_Datamine:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_DigitalRockPhysics:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_EmbossingRepresentations:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_ExplicitStructuredGrid:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_FlipBookPlugin:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_GMVReader:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_GeodesicMeasurement:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_GeographicalMap:BOOL=OFF #https://gitlab.kitware.com/paraview/paraview/-/issues/22622
      - -DPARAVIEW_PLUGIN_ENABLE_GmshIO:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_GmshReader:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_HyperTreeGridADR:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_InSituExodus:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_LANLX3DReader:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_LagrangianParticleTracker:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_LegacyExodusReader:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_LookingGlass:BOOL=OFF # proprietary
      - -DPARAVIEW_PLUGIN_ENABLE_Moments:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_MooseXfemClip:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_NodeEditor:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_NonOrthogonalSource:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_PanoramicProjectionView:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_ParFlow:BOOL=OFF
      - -DPARAVIEW_PLUGIN_ENABLE_ParametricSurfaces:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_SLACTools:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_SaveStateAndScreenshot:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_SpaceMouseInteractor:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_StreamLinesRepresentation:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_StreamingParticles:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_SurfaceLIC:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_ThickenLayeredCells:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_VDFReaderPlugin:BOOL=OFF # Need vapor version 2. Hard to compile from source
      - -DPARAVIEW_PLUGIN_ENABLE_VTKmFilters:BOOL=ON
      - -DPARAVIEW_PLUGIN_ENABLE_XRInterface:BOOL=OFF #need openvr
      - -DPARAVIEW_PLUGIN_ENABLE_pvNVIDIAIndeX:BOOL=OFF
      - -DPARAVIEW_PLUGIN_ENABLE_zSpace:BOOL=OFF
      - -DPARAVIEW_USE_CUDA:BOOL=OFF
      - -DPARAVIEW_USE_HIP:BOOL=OFF
      - -DPARAVIEW_USE_MEMKIND:BOOL=ON
      - -DPARAVIEW_USE_MPI:BOOL=ON
      - -DPARAVIEW_USE_PYTHON:BOOL=ON
      - -DPARAVIEW_USE_QT:BOOL=ON
      - -DPARAVIEW_USE_QTHELP:BOOL=ON
      - -DPARAVIEW_USE_QTWEBENGINE:BOOL=ON
      - -DPARAVIEW_USE_VTKM:BOOL=ON
      - -DBUILD_EXAMPLES:BOOL=ON
      - -DPARAVIEW_INSTALL_DEVELOPMENT_FILES:BOOL=ON
      - -DGmsh_INCLUDE_DIR=/app/include
      - -DGmsh_PRIVATE_INCLUDE_DIR=/app/include/gmsh
      - -DVTK_SMP_ENABLE_TBB:BOOL=ON
      - -DVTK_MODULE_USE_EXTERNAL_VTK_eigen:BOOL=ON
    post-install:
      - install -Dm644 ../Qt/Components/Resources/Icons/pvIcon.svg ${FLATPAK_DEST}/share/icons/hicolor/scalable/apps/${FLATPAK_ID}.svg
      - desktop-file-edit --set-icon=${FLATPAK_ID} ${FLATPAK_DEST}/share/applications/${FLATPAK_ID}.desktop
    sources:
      - type: archive
        url: https://www.paraview.org/files/v5.12/ParaView-v5.12.1.tar.gz
        sha256: 5b3c778dd6c77a75cdfd3fd514f279e08c902325a42ec49865e1f62f2671a969
        x-checker-data:
          type: anitya
          project-id: 9602
          stable-only: true
          url-template: https://www.paraview.org/files/v$major.$minor/ParaView-v$version.tar.gz
      # - type: patch
      #   path: fix_appdata_file.patch
      # - type: git
      #   url: https://gitlab.kitware.com/vtk/MomentInvariants.git
      #   commit: 3fb4824d1f5e1f95917e67a3fb4b8a1546ddd4ae
      #   dest: VTK/Remote/MomentInvariants
